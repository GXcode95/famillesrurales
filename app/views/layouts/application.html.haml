!!! 5
%html
  %head
    %title
      = content_for(:title) || "Familles Rurales"
    %meta{ name: "viewport", content: "width=device-width,initial-scale=1" }
    %meta{ name: "apple-mobile-web-app-capable", content: "yes" }
    %meta{ name: "application-name", content: "Familles Rurales" }
    %meta{ name: "mobile-web-app-capable", content: "yes" }
    = csrf_meta_tags
    = csp_meta_tag

    = yield :head

    -# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!)
    -# = tag.link rel: "manifest", href: pwa_manifest_path(format: :json)

    %link{ rel: "icon", href: "/icon.png", type: "image/png" }
    %link{ rel: "icon", href: "/icon.svg", type: "image/svg+xml" }
    %link{ rel: "apple-touch-icon", href: "/icon.png" }

    = stylesheet_link_tag :app, "data-turbo-track": "reload"
    = javascript_importmap_tags

  %body.bg-gray-50.min-h-screen
    / Topbar de navigation
    %header.bg-white.shadow
      .container.mx-auto.px-5.py-3
        .flex.items-center.justify-between
          = link_to root_path, class: "text-lg font-bold text-indigo-700 hover:text-indigo-900" do
            Familles Rurales

          - if user_signed_in?
            .flex.items-center.gap-4
              %span.text-sm.text-gray-700
                Bonjour,
                %span.font-semibold
                  = current_user.try(:email)
              = link_to "Mon compte",
                edit_user_registration_path,
                class: "inline-flex items-center rounded-md border border-transparent bg-indigo-50 px-3 py-1.5 text-sm font-medium text-indigo-700 hover:bg-indigo-100"
              = button_to "Déconnexion",
                destroy_user_session_path,
                method: :delete,
                class: "inline-flex items-center rounded-md border border-transparent bg-red-600 px-3 py-1.5 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
          - else
            .flex.items-center.gap-3
              = link_to "Connexion",
                new_user_session_path,
                class: "inline-flex items-center rounded-md border border-transparent bg-white px-3 py-1.5 text-sm font-medium text-indigo-700 shadow-sm hover:bg-gray-50"
              = link_to "Inscription",
                new_user_registration_path,
                class: "inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-3 py-1.5 text-sm font-medium text-white shadow-sm hover:bg-indigo-700"

        / Liens vers les différentes ressources
        .mt-3.flex.flex-wrap.gap-3.text-sm.text-gray-700
          = link_to "Activités", activities_path,
            class: "px-2 py-1 rounded-md hover:bg-indigo-50 hover:text-indigo-700"
          = link_to "Catégories", categories_path,
            class: "px-2 py-1 rounded-md hover:bg-indigo-50 hover:text-indigo-700"
          = link_to "Événements", events_path,
            class: "px-2 py-1 rounded-md hover:bg-indigo-50 hover:text-indigo-700"
          = link_to "Articles", posts_path,
            class: "px-2 py-1 rounded-md hover:bg-indigo-50 hover:text-indigo-700"
          = link_to "Staff", staffs_path,
            class: "px-2 py-1 rounded-md hover:bg-indigo-50 hover:text-indigo-700"

    %div.absolute.top-0.left-0.w-full
      %p.notice= notice
      %p.alert= alert

    %main.container.mx-auto.mt-28.px-5.flex
      = yield

